/* -----------------------------
   Dark Theme
----------------------------- */

/* Dark mode class - applied when explicitly selected */
.dark-mode {
    --soft-white: var(--dark-soft-white);
    --soft-black: var(--dark-soft-black);
    --dark-shade: var(--dark-dark-shade);
    --link-blue: var(--dark-link-blue);
    --hover-blue: var(--dark-hover-blue);
    --focus-outline-blue: var(--dark-focus-outline-blue);
    --line-grey: var(--dark-line-grey);
    --highlight-grey: var(--dark-highlight-grey);
    --subtle-grey: var(--dark-subtle-grey);
    --hover-grey: var(--dark-hover-grey);
    --in-force-green: var(--dark-in-force-green);
    --in-force-dark-green: var(--dark-in-force-dark-green);
    --in-force-red: var(--dark-in-force-red);
    --in-force-dark-red: var(--dark-in-force-dark-red);
    --light-purple: var(--dark-light-purple);
    --dark-purple: var(--dark-dark-purple);
    --disabled-grey: var(--dark-disabled-grey);
    --light-anchor: var(--dark-anchor);
}

/* System preference based dark mode - applied only when:
 * 1. System prefers dark mode AND
 * 2. JavaScript is disabled (meaning no .light-mode class can be added) AND
 * 3. No .dark-mode class is present (to avoid conflicting with JS-based toggle)
 */
@media (prefers-color-scheme: dark) {
    html:not(.light-mode):not(.dark-mode) {
        --soft-white: var(--dark-soft-white);
        --soft-black: var(--dark-soft-black);
        --dark-shade: var(--dark-dark-shade);
        --link-blue: var(--dark-link-blue);
        --hover-blue: var(--dark-hover-blue);
        --focus-outline-blue: var(--dark-focus-outline-blue);
        --line-grey: var(--dark-line-grey);
        --highlight-grey: var(--dark-highlight-grey);
        --subtle-grey: var(--dark-subtle-grey);
        --hover-grey: var(--dark-hover-grey);
        --in-force-green: var(--dark-in-force-green);
        --in-force-dark-green: var(--dark-in-force-dark-green);
        --in-force-red: var(--dark-in-force-red);
        --in-force-dark-red: var(--dark-in-force-dark-red);
        --light-purple: var(--dark-light-purple);
        --dark-purple: var(--dark-dark-purple);
        --disabled-grey: var(--dark-disabled-grey);
    }
}

/* Law number badges maintain consistent dark background in all themes */

/* Dark mode folder icon colors - use explicit white SVGs */
.dark-mode details.details-col summary::before {
    background-image: url('data:image/svg+xml;charset=utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="none" stroke="%23f8f8f8" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m-3-3h6m5 7a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"/></svg>');
}

.dark-mode details.details-col[open] > summary::before {
    background-image: url('data:image/svg+xml;charset=utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="none" stroke="%23f8f8f8" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 13h6m5 7a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"/></svg>');
}

@media (prefers-color-scheme: dark) {
    html:not(.light-mode):not(.dark-mode) details.details-col summary::before {
        background-image: url('data:image/svg+xml;charset=utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="none" stroke="%23f8f8f8" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m-3-3h6m5 7a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"/></svg>');
    }
    
    html:not(.light-mode):not(.dark-mode) details.details-col[open] > summary::before {
        background-image: url('data:image/svg+xml;charset=utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="none" stroke="%23f8f8f8" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 13h6m5 7a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"/></svg>');
    }
}